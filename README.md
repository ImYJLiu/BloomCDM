[-] 添加第二层
[-] 增加知识点
[-] 确定知识点的数量，保存知识点的组信息

数据处理的参数 data_process

``
-dp True
-dn assist
-td ./data_edu/Assist/
-od ./data_edu/Assist/output_data.pkl
``

模型 bpr_movielens
```
--data
./data_edu/Assist/output_data/output_data.pkl
--n_epochs
100
--batch_size
2048
--dim
4
--weight_decay
0.025
--weight_decay_1
0.025
--lamdaU
0.01
--lamdaV_1
0.01
--lr
1e-3
--print_every
20
--model
./data_edu/Assist/output_data/output_bpt.pt
```

2021.2.13更新
[done]
1. 将item对应的二级组信息进行标注
2. 选取第一个知识点作为基准 [就用这个方法吧，别的都不行]


weight_decay_1 0.025 lamdaU 0.01, lamdaV_1 0.01

2021.2.15更新
know_group
 TODO
 1. 加载组信息[done]
    know_group:
        用户：
            1:
                'sum':分数
                'count':个数
                'avg_sum':平均分数
            2:
               

 2. 完善BloomCDM二层

 self.num_know : 112
 all_sole_know = <class 'list'>: [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 10.0, 12.0, 13.0, 14.0, 15.0, 16.0, 18.0, 19.0, 21.0, 22.0, 23.0, 24.0, 26.0, 27.0, 28.0, 30.0, 31.0, 33.0, 34.0, 35.0, 37.0, 38.0, 39.0, 40.0, 42.0, 43.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0, 57.0, 58.0, 59.0, 60.0, 61.0, 64.0, 67.0, 68.0, 79.0, 80.0, 81.0, 82.0, 83.0, 84.0, 85.0, 86.0, 87.0, 89.0, 90.0, 93.0, 94.0, 95.0, 96.0, 97.0, 98.0, 99.0, 100.0, 104.0, 105.0, 107.0, 118.0, 120.0, 56.0, 9.0, 92.0, 102.0, 20.0, 17.0, 91.0, 72.0, 62.0, 63.0, 112.0, 88.0, 29.0, 115.0, 119.0, 113.0, 123.0, 121.0, 111.0, 69.0, 76.0, 77.0, 71.0...


batch_size:128 e_poch:10
roc_auc 0.5026167682913287
batch_size:512 e_poch:100
roc_auc 0.5017661158788106
batch_size:512 e_poch:10
0.5014629689108775


2021.2.20 更新
数据集好像出现了问题 u, i, j, i_1

2021.2.21 更新
```shell script
--data
./data_edu/Assist/output_data/output_data.pkl
--n_epochs
10
--batch_size
4096
--dim
4
--weight_decay
0.025
--weight_decay_1
0.025
--lamdaU
0.01
--lamdaV_1
0.01
--lr
1e-3
--print_every
100
--model
./data_edu/Assist/output_data/output_bpt.pt
```
通过改变batch——size的大小【512 ---- > 4096】增加aoc的值  【失败】
通过给2层 3层  减小权重增加aoc的值  【2层权重为0.0025的情况下，roc_auc 0.777863451778559】

2021.2.22 更新
higher_know_group：
        用户：
            知识组：
                'sum':分数
                'count':个数
                'avg_sum':平均分数
                
高阶知识组是抽象出来的
1. 对知识组的频率进行排序
    1.1 for循环遍历每一个题目，得到每个题目被做的频率。{用字典存储频率}  df
    1.2 for循环遍历每一个知识组，将知识组内的频率相加。{用字典存储总频率} {‘sole_know’: 总频率} 
2. for循环遍历每一个知识组，【知识组：用户维度的做题正确与否】
    2.1 all_sole_dict:
        2.1.1 r矩阵按照all_sole_dict 进行求和，构成【用户，知识组】的矩阵
        2.1.2 提取【知识组】向量，进行cos相似度的计算
3. 计算  cos 相似度   相似度矩阵
    3.1 通过分析相似度矩阵   mean：81.48214285714286   var：799.9282525510205  方差过大，组大小差异过大
    
4. 最终构成higher_know_group

result
仅有bpr:最佳batch_size:4 最佳roc_auc:0.78

|   batch_size  |    n_epochs   |   roc_auc 结果| loss 结果  |    备注   |
|---------------|---------------|---------------|-----------|-----------|
|      4        |    1000       |0.7819         |   0.6663  |gpu利用率最高|
|      32       |    1          |0.664397838431 |   22.0852 ||
|     4096      |    1000       |0.8483597935608|           ||
|     4096      |    2000       |0.8575647917256|  1462.8295||
|     4096      |    10000      |               |  1473.5203||

**bpr + 1 + 2**
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 | loss 结果  |    备注     |
|---------------|---------------|---------------|----------------|-----------|-------------|
|      2        |      4        |    1000       | 0.81832463788  |   1.0363  | |
|      2        |      4        |    1000       | 0.81144883341  |   0.9763  | |
|      3        |      4        |    1000       | 0.80564807033  |   0.8943  | |
|      4        |      4        |    1000       | 0.80047258200  |   0.8869  |gpu利用率最高 |
|   know_size   |      4        |    1000       | 0.75555447614  |   0.6969  | |


bpr + 1
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 | loss 结果  |    备注     |
|---------------|---------------|---------------|----------------|-----------|-------------|
|      2        |      4        |    1000       |   |   1.0363  | |


irt[和AAAI结果一致]
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果 |loss 结果  |    备注     |
|---------------|---------------|---------------|----------------|-----------|-----------|-------------|
|      4        |      4        |    10         | 0.81832463788  |           |   1.0363  |  irt loss考虑两个商品i,j|
|      4        |      4        |    1          |     0.742298   |           |           |  irt loss仅考虑一个商品i,就他最低了，保存这个模型【TODO】|
|      4        |      4        |    5          |     0.804028   |           |   0.5154  | irt loss仅考虑一个商品i|
|      4        |      4        |    7          |     0.5X       |     0.6X  |           | irt loss仅考虑一个商品i|
|      4        |      4        |    20         |     0.544941   |  0.656575 |           | irt loss仅考虑一个商品i|
|      4        |      100      |    50         |     0.539498   |  0.655449 |    0.0017 | irt loss仅考虑一个商品i|
|      4        |      100      |    50         |     0.667899   |  0.655449 |    0.0017 | irt loss仅考虑一个商品i|
|      4        |      200      |    15         |     0.675672   |  0.689795 |    0.0017 | |

pmf
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    备注     |
|---------------|---------------|---------------|----------------|-----------|-------------|
|      4        |      4        |       3       |    0.780020    | 0.021530  | loss 仅考虑做对的|
|      4        |      4        |       3       |    0.855615    | 0.055012  | loss 修改数据集之后的|
P@1: 0.0046, P@5: 0.0061 P@10: 0.0069, R@1: 0.0005, R@5: 0.0025, R@10: 0.0043
|      4        |      200      |       50      |    0.501933    | 0.488290  | 在19的机器上跑的|
|      4        |      200      |       7       |    0.724488    | 0.654046  | 在191的机器上跑的|


mirt
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    备注     |
|---------------|---------------|---------------|----------------|-----------|-------------|
|      4        |      4        |       3       |       0.854396 |  | |
--------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------
大论文实验：80%
BloomCDM:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      4096     |       5       |    0.766417   |  0.832737  |    0.513976     |   0.507587     |
|      4        |      200      |       20      |    0.766095   |  0.878892  |    0.513976     |   0.507587     |

IRT:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      4096     |       10      |    0.712520   |  0.690690  |    0.588158     |   0.568944     |
|      4        |      4096     |       7       |    0.636439   |  0.631513  |    0.504727     |   0.503795     |
|      4        |      4096     |       8       |    0.641109   |  0.636960  |    0.506406     |   0.505376     |


PMF:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |       20      |    0.689668   |  0.656964  |    0.475173     |   0.407312     |
|      4        |      200      |       20      |    0.727428   |  0.656628  |    0.475613     |   0.402606     |
|      4        |      200      |       30      |    0.727428   |  0.656628  |    0.475613     |   0.402606     |lambda U=0.1 lambda V=0.001 


MIRT:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |       3       |    0.722190   |  0.758024  |    0.503274     |   0.501694     |


BPR:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |       3       |    0.722190   |  0.758024  |    0.503274     |   0.501694     |

BloomCDM_RC:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |       10      |    0.722190   |  0.758024  |    0.503274     |   0.501694     |

大论文实验：90%
BloomCDM_RC:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |       20      |    0.771940   |  0.891202  |    0.575761     |   0.535388     |
|      4        |      200      |       10      |    0.766436   |  0.859227  |    0.548118     |   0.526471     |

BloomCDM:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |       20      |    0.763488   |  0.884739  |    0.573083     |   0.533952     |
|      4        |      200      |       30      |    0.786027   |  0.904874  |    0.580645     |   0.534020     |


IRT:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |       20      |    0.696081   |  0.686806  |    0.671443     |   0. 626523    |


PMF:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |       20      |    0.674959   |  0.657840  |    0.581504     |   0.342356     |


MIRT:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |       20      |    0.779462   |  0.658481  |    0.646754     |   0.642729     |
|      4        |      200      |       5       |    0.756472   |  0.656244  |    0.634575     |   0.633027     |
|      4        |      200      |       1       |    0.694645   |  0.656244  |    0.623441     |   0.622349     |


BPR
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |       10      |    0.791021   |  0.871085  |    0.551745     |   0.525831     |
|      4        |      200      |       1       |    0.754117   |  0.816426  |    0.501249     |   0.500622     |


大论文实验：70%
BPR
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |        1      |    0.748082????   |  0.  |    0.     |   0.     |

IRT:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |        5      |    0.653567   |  0.648399  |    0.532203     |   0.527362     |


MIRT:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |        5      |    0.742729   |  0.657784  |    0. 632060    |   0.630817     |

PMF:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |        5      |    0.656596   |  0.621070  |    0.577655     |   0.344114     |
|      4        |      200      |        20     |    0.678895   |  0.656803  |    0.581867     |   0.343391     |

BloomCDM:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |        30     |    0.759769   |  0.885884  |    0.580840     |   0.534630     |


BloomCDM_RC:
|      dim      |   batch_size  |    n_epochs   |   roc_auc 结果 |  acc 结果  |    RMSE结果     |    MAE结果     |    备注     |
|---------------|---------------|---------------|---------------|------------|-----------------|----------------|-------------|
|      4        |      200      |        1     |    0.   |  0.  |    0.     |   0.     |


|      4        |      200      |        1      |    0.   |  0.  |    0.     |   0.     |
